---
import Layout from "../layouts/Layout.astro";
import "@new-ui/foundations";
import Dashboard from "../components/Dashboard";
import ItemListSchema from "../components/schema/ItemListSchema.astro";
import BreadcrumbSchema from "../components/schema/BreadcrumbSchema.astro";
import data from "../data/tools.json";

export function getStaticPaths() {
  return [
    { params: { category: "art" } },
    { params: { category: "audio" } },
    { params: { category: "code" } },
    { params: { category: "copywriting" } },
    { params: { category: "design" } },
    { params: { category: "developer" } },
    { params: { category: "education" } },
    { params: { category: "enterprise" } },
    { params: { category: "fashion" } },
    { params: { category: "gaming" } },
    { params: { category: "health" } },
    { params: { category: "legal" } },
    { params: { category: "llm" } },
    { params: { category: "music" } },
    { params: { category: "nocode" } },
    { params: { category: "photos" } },
    { params: { category: "productivity" } },
    { params: { category: "prompts" } },
    { params: { category: "research" } },
    { params: { category: "seo" } },
    { params: { category: "social" } },
    { params: { category: "video" } },
    { params: { category: "xtras" } },
  ];
}

const { category } = Astro.params;

// Get tools for this category
const categoryData = data.tools.find((cat: any) => cat.category === category);
const categoryTools = categoryData?.content || [];
const categoryTitle = categoryData?.title || category;

// Breadcrumb data
const breadcrumbs = [
  { name: "Home", url: "https://riseofmachine.com" },
  { name: categoryTitle },
];
---

<Layout
  site={`Rise of Machine - ${category}`}
  title="Make the Most of It"
  tagline="AI tools curated by autonomous AI agents for makers and SMBs"
>
  <ItemListSchema items={categoryTools} listName={`${categoryTitle} Tools`} />
  <BreadcrumbSchema items={breadcrumbs} />
  <main>
    <Dashboard client:load category={category} transition:persist />
  </main>
</Layout>
